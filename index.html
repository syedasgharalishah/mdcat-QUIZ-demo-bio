<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MDCAT Biology Quiz – Chapter 13: Chromosome and DNA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* General Body Styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Very light gray */
            color: #2C3E50; /* Main text color */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh; /* Full viewport height */
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        /* Top Bar Styling */
        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #6D6875;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        /* Header Section Styling */
        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 1rem;
        }

        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #20B2AA, #3EB489); /* Teal to Seafoam */
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #6D6875;
            margin-top: 0.5rem;
        }

        /* Card Styling (for login, quiz, results pages) */
        .card {
            background-color: #FFF5EE; /* Very light, warm tone */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }

        /* Button Styling */
        .button-gradient {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9); /* Lavender to PeachPuff - light and attractive */
            color: #2C3E50; /* Dark text for contrast */
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .button-gradient:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd; /* Light border */
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease, transform 0.1s ease-out; /* Added transform for hover */
            margin-bottom: 0.75rem;
            color: #2C3E50;
            font-weight: normal;
        }

        .option-button:hover:not(.selected):not(.correct):not(.incorrect) {
            background-color: #f0f0f0; /* Slightly darker on hover */
            transform: scale(1.05); /* Enlarge 5% on hover */
        }

        .option-button.selected {
            border-color: #6D6875; /* Medium gray for selected */
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #28a745; /* Darker green border */
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #FF6B6B; /* Light Red */
            border-color: #dc3545; /* Darker red border */
            animation: shake-red 0.5s ease-out forwards;
        }

        /* Special Question Styling */
        .special-question-card {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); /* Glowing effect */
        }

        /* Explanation Section Styling */
        .explanation {
            background-color: #e0f7fa; /* Light Cyan */
            border-left: 5px solid #20B2AA; /* Teal border */
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #2C3E50;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        /* Timer and Progress Display */
        .timer-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2C3E50;
            margin-bottom: 1rem;
            text-align: center;
        }

        .question-progress {
            font-size: 1rem;
            color: #6D6875;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Animations */
        @keyframes pulse-green {
            0% { transform: scale(1); }
            50% { transform: scale(1.01); }
            100% { transform: scale(1); }
        }

        @keyframes shake-red {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem;
                align-items: flex-start; /* Align to top-left on mobile */
            }
            .top-bar .date-display {
                order: 2; /* Move date to bottom on mobile */
                font-size: 0.8rem;
            }
            .top-bar .date-display .fa-calendar-alt {
                margin-right: 0.2rem;
            }
            .quiz-title {
                font-size: 1.5rem;
            }
            .banner-logo {
                max-width: 150px;
            }
            .card {
                margin: 0.75rem auto;
                padding: 1rem;
            }
            .button-gradient {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
            .option-button {
                padding: 0.6rem 0.8rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>

    <script>
        // Disable right-click, specific keyboard shortcuts (Ctrl+U, Ctrl+Shift+I, Ctrl+Shift+J, F12), copy, and paste
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', e => {
            if ((e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) || e.key === 'F12') {
                e.preventDefault();
            }
        });
        document.addEventListener('copy', event => event.preventDefault());
        document.addEventListener('paste', event => event.preventDefault());
    </script>

    <div class="top-bar">
        <div class="date-display" id="liveDate">
            <i class="fas fa-calendar-alt"></i>
            <span></span>
        </div>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle">MDCAT Biology Quiz – Chapter 13: Chromosome and DNA</h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/zHDMrzbf/20250520-0957-Timeless-Healing-Wisdom-simple-compose-01jvqa0g2zfmzs4tq83z7k3h93.png" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            <strong>Medical Entrance Success Pakistan</strong>
            <br>
            Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <!-- All page sections are initially hidden to prevent flicker -->
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login to Start Your Quiz</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" placeholder="Your Full Name">
            </div>
            <div class="mb-6 flex items-center">
                <input type="checkbox" id="surpriseMeCheckbox" class="mr-2">
                <label for="surpriseMeCheckbox" class="text-sm font-medium text-gray-700">Enable "Surprise Me" Mode (Randomize 30% of MCQs)</label>
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display" id="timerDisplay"></div>
            <div class="question-progress" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6">
            </div>
            <div class="flex justify-between">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
                <button id="submitQuizBtn" class="button-gradient px-6 py-2 hidden">Submit Quiz</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / <span id="maxScore"></span></p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>
    </main>

    <script>
        // --- Configuration and Data ---
        const QUIZ_DATE_STR = "June 07, 2025"; // Specific date for the quiz
        const QUIZ_DATE = new Date(QUIZ_DATE_STR);
        const LOGIN_ID = "demo";
        const LOGIN_PASSWORD = "demo";
        const QUIZ_DURATION_MINUTES = 60; // 1 hour countdown
        const FORMSPREE_URL = "https://formspree.io/f/xdkgvgbd";

        // Quiz Data Structure
        const originalQuizQuestions = []; // Stores the initial, unshuffled questions
        let quizQuestions = []; // This array will be shuffled and used for the current quiz
        let currentQuestionIndex = 0;
        // Stores { questionIndex: int (original index), selectedOptionIndex: int (index in shuffled options), isCorrect: bool }
        let userAnswers = [];
        let quizStartTime;
        let timerInterval;
        let specialQuestionOriginalIndex = -1; // To store the original index of the special question

        // --- Helper Functions ---

        /**
         * Sets up the current date display in the header.
         */
        function setLiveDate() {
            const dateSpan = document.querySelector('#liveDate span');
            const today = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            dateSpan.textContent = today.toLocaleDateString('en-US', options);
            document.getElementById('updatedDate').textContent = today.toLocaleDateString('en-US', options);
        }

        /**
         * Shuffles an array in place using Fisher-Yates (Knuth) shuffle.
         * @param {Array} array - The array to shuffle.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Converts seconds to a human-readable time string (e.g., "35 minutes 10 seconds").
         * @param {number} totalSeconds - The total number of seconds.
         * @returns {string} Formatted time string.
         */
        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        /**
         * Updates the progress bar and question progress text.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} – ${Math.round(progress)}% Complete`;
        }

        /**
         * Displays a specific page and hides others.
         * @param {string} pageId - The ID of the page to display.
         */
        function showPage(pageId) {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('candidateNamePage').classList.add('hidden');
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById(pageId).classList.remove('hidden');
        }

        /**
         * Starts the quiz timer.
         */
        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60; // Convert minutes to seconds

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timerDisplay').textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz(true); // Auto-submit on timer expiry
                } else {
                    timeLeft--;
                }
            }

            updateTimerDisplay(); // Initial display
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        /**
         * Renders the current question and its options.
         */
        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = ''; // Clear previous options

            // Remove special-question-card class from previous question if any
            const quizCard = document.getElementById('quizPage');
            quizCard.classList.remove('special-question-card');

            // Add special-question-card class if it's today's special question and date matches
            const today = new Date();
            // Compare only year, month, and day
            const isTodayQuizDate = today.getFullYear() === QUIZ_DATE.getFullYear() &&
                                   today.getMonth() === QUIZ_DATE.getMonth() &&
                                   today.getDate() === QUIZ_DATE.getDate();

            if (question.special && isTodayQuizDate) {
                quizCard.classList.add('special-question-card');
            }

            // Create a shuffled copy of the options for the current question
            // We need to store the original index mapping before shuffling
            const shuffledOptionsWithOriginalIndex = question.options.map((option, index) => ({
                optionText: option,
                originalIndex: index
            }));
            shuffleArray(shuffledOptionsWithOriginalIndex);

            // Store the shuffled options and their original correct index for this question
            // This allows us to track the correct option even after shuffling
            quizQuestions[currentQuestionIndex].shuffledOptions = shuffledOptionsWithOriginalIndex;
            quizQuestions[currentQuestionIndex].shuffledCorrectOptionIndex = shuffledOptionsWithOriginalIndex.findIndex(
                opt => opt.originalIndex === question.correctOptionIndex
            );

            shuffledOptionsWithOriginalIndex.forEach((optionObj, index) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.innerHTML = optionObj.optionText; // Use innerHTML to render LaTeX
                button.dataset.shuffledOptionIndex = index; // Store the shuffled index
                button.onclick = () => selectOption(index);

                // Apply selected state if already answered
                const userAnswer = userAnswers[currentQuestionIndex];
                if (userAnswer && userAnswer.selectedOptionIndex === index) {
                    button.classList.add('selected');
                    if (userAnswer.isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                    // Disable all options if already answered
                    Array.from(optionsContainer.children).forEach(optBtn => optBtn.disabled = true);
                    document.getElementById('explanationDiv').style.display = 'block';
                }
                optionsContainer.appendChild(button);
            });

            // Render math equations using MathJax if available
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise([document.getElementById('questionText'), optionsContainer]);
            }

            // Show/hide explanation
            const explanationDiv = document.getElementById('explanationDiv');
            explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise([explanationDiv]);
            }
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                explanationDiv.style.display = 'block';
            } else {
                explanationDiv.style.display = 'none';
            }

            // Update navigation buttons visibility
            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            document.getElementById('nextBtn').classList.toggle('hidden', currentQuestionIndex === quizQuestions.length - 1);
            document.getElementById('submitQuizBtn').classList.toggle('hidden', currentQuestionIndex !== quizQuestions.length - 1);

            updateProgressBar();
        }

        /**
         * Handles option selection by the user.
         * @param {number} selectedOptionIndex - The index of the selected option from the SHUFFLED options.
         */
        function selectOption(selectedOptionIndex) {
            const question = quizQuestions[currentQuestionIndex];
            const isCorrect = (selectedOptionIndex === question.shuffledCorrectOptionIndex);

            // Store user's answer
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionIndex, // This is the index in the SHUFFLED options
                isCorrect: isCorrect,
            };

            // Apply visual feedback
            const optionsContainer = document.getElementById('optionsContainer');
            Array.from(optionsContainer.children).forEach((button, index) => {
                button.disabled = true; // Disable all options after selection
                button.classList.remove('selected'); // Clear previous selected state

                if (index === selectedOptionIndex) {
                    button.classList.add('selected');
                    if (isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                } else if (index === question.shuffledCorrectOptionIndex) {
                    // Highlight the correct answer even if not selected by the user
                    button.classList.add('correct');
                }
            });

            // Show explanation
            document.getElementById('explanationDiv').style.display = 'block';
             // Render math equations in explanation
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise([document.getElementById('explanationDiv')]);
            }
        }

        /**
         * Navigates to the next question.
         */
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        /**
         * Navigates to the previous question.
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        /**
         * Submits the quiz, calculates results, and displays them.
         * @param {boolean} isAutoSubmit - True if submitted by timer, false otherwise.
         */
        function submitQuiz(isAutoSubmit = false) {
            clearInterval(timerInterval); // Stop the timer

            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;
            let totalAttempted = 0;

            userAnswers.forEach(answer => {
                if (answer && answer.selectedOptionIndex !== undefined) {
                    totalAttempted++;
                    if (answer.isCorrect) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                }
            });

            const maxPossibleScore = quizQuestions.length; // 1 point per question for simplicity of scoring
            const score = correctCount; // Score is simply correct answers

            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = QUIZ_DATE_STR;
            document.getElementById('resultScore').textContent = score;
            document.getElementById('maxScore').textContent = maxPossibleScore;
            document.getElementById('resultCorrect').textContent = `${correctCount}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);

            showPage('resultsPage');

            // Silent Formspree submission
            const formData = new FormData();
            formData.append('Candidate Name', candidateName);
            formData.append('Date of Quiz', QUIZ_DATE_STR);
            formData.append('Score', score);
            formData.append('Correct Answers', correctCount);
            formData.append('Incorrect Answers', incorrectCount);
            formData.append('Total Attempted', totalAttempted);
            formData.append('Time Taken', formatTime(timeTakenSeconds));
            formData.append('Quiz ID', "Chapter 13 Chromosome and DNA");

            fetch(FORMSPREE_URL, {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    console.log('Quiz results submitted successfully!');
                } else {
                    console.error('Formspree submission failed.');
                }
            }).catch(error => {
                console.error('Error during Formspree submission:', error);
            });
        }

        // --- Quiz Initialization ---
        function initializeQuiz() {
            // Populate originalQuizQuestions (only once) if not already populated
            if (originalQuizQuestions.length === 0) {
                // MCQs for Chapter 13: Chromosome and DNA (100 questions: 10 easy, 50 medium, 40 tough)

                // Easy Questions (10 Qs)
                const easyMCQs = [
                    { question: "What is the primary genetic material in most living organisms?", options: ["Protein", "RNA", "DNA", "Lipid"], correctOptionIndex: 2, explanation: "DNA (Deoxyribonucleic acid) carries the genetic instructions used in the growth, development, functioning, and reproduction of all known living organisms and many viruses." },
                    { question: "Chromosomes are located in which part of a eukaryotic cell?", options: ["Cytoplasm", "Mitochondria", "Nucleus", "Ribosome"], correctOptionIndex: 2, explanation: "In eukaryotic cells, chromosomes are found within the nucleus, which is a membrane-bound organelle." },
                    { question: "The basic unit of DNA is a:", options: ["Amino acid", "Monosaccharide", "Nucleotide", "Fatty acid"], correctOptionIndex: 2, explanation: "A nucleotide consists of a sugar (deoxyribose), a phosphate group, and a nitrogenous base." },
                    { question: "Which of the following nitrogenous bases is found in DNA but not in RNA?", options: ["Adenine", "Guanine", "Cytosine", "Thymine"], correctOptionIndex: 3, explanation: "DNA contains Adenine (A), Guanine (G), Cytosine (C), and Thymine (T). RNA contains Adenine (A), Guanine (G), Cytosine (C), and Uracil (U)." },
                    { question: "What is the shape of a DNA molecule?", options: ["Single helix", "Triple helix", "Double helix", "Linear strand"], correctOptionIndex: 2, explanation: "The DNA molecule typically forms a double helix structure, resembling a twisted ladder." },
                    { question: "Replication of DNA occurs during which phase of the cell cycle?", options: ["G1 phase", "S phase", "G2 phase", "M phase"], correctOptionIndex: 1, explanation: "The S (synthesis) phase is when DNA replication takes place, ensuring that each daughter cell receives a complete set of chromosomes." },
                    { question: "Which enzyme is responsible for unwinding the DNA double helix during replication?", options: ["DNA ligase", "DNA polymerase", "Helicase", "Primase"], correctOptionIndex: 2, explanation: "Helicase unwinds the DNA double helix by breaking the hydrogen bonds between complementary base pairs." },
                    { question: "The process of synthesizing RNA from a DNA template is called:", options: ["Replication", "Translation", "Transcription", "Mutation"], correctOptionIndex: 2, explanation: "Transcription is the first step of gene expression, where genetic information from DNA is copied into RNA." },
                    { question: "In DNA, Adenine (A) always pairs with:", options: ["Guanine (G)", "Cytosine (C)", "Thymine (T)", "Uracil (U)"], correctOptionIndex: 2, explanation: "According to Chargaff's rules, in DNA, Adenine always pairs with Thymine (A-T) via two hydrogen bonds, and Guanine always pairs with Cytosine (G-C) via three hydrogen bonds." },
                    { question: "The constricted region of a chromosome that holds sister chromatids together is called the:", options: ["Telomere", "Centromere", "Chromatin", "Nucleosome"], correctOptionIndex: 1, explanation: "The centromere is essential for proper chromosome segregation during cell division." }
                ];
                originalQuizQuestions.push(...easyMCQs);

                // Medium Questions (50 Qs)
                const mediumMCQs = [
                    { question: "Which of the following is NOT a component of a DNA nucleotide?", options: ["Deoxyribose sugar", "Phosphate group", "Ribose sugar", "Nitrogenous base"], correctOptionIndex: 2, explanation: "Ribose sugar is found in RNA, while deoxyribose sugar is characteristic of DNA nucleotides." },
                    { question: "If a DNA molecule contains 20% Adenine, what percentage of Guanine would it have?", options: ["20%", "30%", "40%", "80%"], correctOptionIndex: 1, explanation: "According to Chargaff's rules, %A = %T and %G = %C. If A = 20%, then T = 20%. Total A+T = 40%. Remaining G+C = 100% - 40% = 60%. So, G = 30% and C = 30%." },
                    { question: "Histones are proteins associated with DNA to form:", options: ["Nucleosomes", "Ribosomes", "Mitochondria", "Cell walls"], correctOptionIndex: 0, explanation: "DNA wraps around histone proteins to form nucleosomes, which are the basic units of chromatin structure." },
                    { question: "Which type of RNA carries genetic information from DNA to the ribosomes?", options: ["tRNA", "rRNA", "mRNA", "snRNA"], correctOptionIndex: 2, explanation: "Messenger RNA (mRNA) carries the code from DNA in the nucleus to the ribosomes in the cytoplasm for protein synthesis." },
                    { question: "The process by which a cell makes an exact copy of its DNA is known as:", options: ["Transcription", "Translation", "Replication", "Mutation"], correctOptionIndex: 2, explanation: "DNA replication ensures that each new cell receives a complete and identical set of genetic instructions." },
                    { question: "In prokaryotic cells, the genetic material is found in the:", options: ["Nucleus", "Cytoplasm (nucleoid region)", "Mitochondria", "Chloroplasts"], correctOptionIndex: 1, explanation: "Prokaryotic cells lack a membrane-bound nucleus; their DNA is located in an irregular region called the nucleoid." },
                    { question: "Which bond holds the two complementary strands of DNA together?", options: ["Phosphodiester bond", "Glycosidic bond", "Hydrogen bond", "Peptide bond"], correctOptionIndex: 2, explanation: "Hydrogen bonds form between complementary nitrogenous bases (A-T, G-C) and are relatively weak, allowing the strands to separate during replication and transcription." },
                    { question: "A segment of DNA that codes for a specific protein is called a:", options: ["Chromosome", "Allele", "Gene", "Codon"], correctOptionIndex: 2, explanation: "A gene is the fundamental physical and functional unit of heredity." },
                    { question: "The enzyme that adds new nucleotides to the growing DNA strand during replication is:", options: ["DNA ligase", "RNA polymerase", "DNA polymerase", "Helicase"], correctOptionIndex: 2, explanation: "DNA polymerase synthesizes new DNA strands by adding nucleotides complementary to the template strand." },
                    { question: "Which of the following is semi-conservative in nature?", options: ["RNA synthesis", "Protein synthesis", "DNA replication", "ATP synthesis"], correctOptionIndex: 2, explanation: "DNA replication is semi-conservative, meaning each new DNA molecule consists of one original strand and one newly synthesized strand." },
                    { question: "Telomeres are found at the ends of:", options: ["Genes", "Proteins", "Chromosomes", "RNA molecules"], correctOptionIndex: 2, explanation: "Telomeres are repetitive nucleotide sequences that protect the ends of chromosomes from deterioration or from fusion with neighboring chromosomes." },
                    { question: "The process of synthesizing protein from an mRNA template is called:", options: ["Replication", "Transcription", "Translation", "Reverse transcription"], correctOptionIndex: 2, explanation: "Translation occurs at the ribosomes, where the mRNA sequence is decoded to produce a specific amino acid sequence, forming a protein." },
                    { question: "Which of the following is associated with euchromatin?", options: ["Tightly packed", "Transcriptionally inactive", "Loosely packed", "Darkly stained"], correctOptionIndex: 2, explanation: "Euchromatin is a lightly packed form of chromatin that is rich in genes and is often under active transcription." },
                    { question: "The backbone of a DNA strand is composed of:", options: ["Nitrogenous bases and sugars", "Sugars and phosphate groups", "Nitrogenous bases and phosphate groups", "Amino acids"], correctOptionIndex: 1, explanation: "The sugar-phosphate backbone provides structural integrity to the DNA molecule." },
                    { question: "A Karyotype is an organized profile of a person's:", options: ["Proteins", "Genes", "Chromosomes", "RNA"], correctOptionIndex: 2, explanation: "A karyotype is a collection of an individual's chromosomes arranged in pairs and ordered by size and shape, used to detect chromosomal abnormalities." },
                    { question: "Which enzyme is responsible for joining Okazaki fragments on the lagging strand during DNA replication?", options: ["DNA polymerase", "DNA ligase", "Primase", "Helicase"], correctOptionIndex: 1, explanation: "DNA ligase forms phosphodiester bonds to connect the discontinuous Okazaki fragments into a continuous strand." },
                    { question: "If the sequence of one DNA strand is 5'-ATGC-3', the complementary strand will be:", options: ["3'-TACG-5'", "3'-GCAT-5'", "5'-TACG-3'", "5'-ATGC-3'"], correctOptionIndex: 0, explanation: "DNA strands are antiparallel and complementary, with A pairing with T and G pairing with C." },
                    { question: "Which of the following types of RNA is a structural component of ribosomes?", options: ["mRNA", "tRNA", "rRNA", "snRNA"], correctOptionIndex: 2, explanation: "Ribosomal RNA (rRNA) combines with proteins to form ribosomes, the cellular machinery for protein synthesis." },
                    { question: "Down syndrome is an example of a chromosomal abnormality involving:", options: ["Monosomy", "Deletion", "Trisomy", "Translocation"], correctOptionIndex: 2, explanation: "Down syndrome (Trisomy 21) is caused by the presence of an extra copy of chromosome 21." },
                    { question: "During DNA replication, the leading strand is synthesized:", options: ["Discontinuously", "In the 3' to 5' direction", "Towards the replication fork", "Away from the replication fork"], correctOptionIndex: 2, explanation: "The leading strand is synthesized continuously in the 5' to 3' direction, following the unwinding of the replication fork." },
                    { question: "What is the function of DNA primase in DNA replication?", options: ["Unwinding DNA", "Adding DNA nucleotides", "Synthesizing short RNA primers", "Repairing DNA damage"], correctOptionIndex: 2, explanation: "Primase synthesizes short RNA primers, which provide a free 3'-OH group for DNA polymerase to start adding DNA nucleotides." },
                    { question: "A nucleosome consists of DNA wrapped around a core of:", options: ["RNA molecules", "Lipid molecules", "Histone proteins", "Amino acids"], correctOptionIndex: 2, explanation: "The association of DNA with histones helps in the compaction and organization of the vast amount of DNA within the cell nucleus." },
                    { question: "The genetic code is degenerate, meaning:", options: ["Each codon specifies multiple amino acids.", "Multiple codons can specify the same amino acid.", "It is universal across all organisms.", "It contains stop signals."], correctOptionIndex: 1, explanation: "Degeneracy means that more than one codon can code for the same amino acid, providing a buffer against mutations." },
                    { question: "Which type of mutation involves the insertion or deletion of nucleotides, leading to a shift in the reading frame?", options: ["Point mutation", "Silent mutation", "Missense mutation", "Frameshift mutation"], correctOptionIndex: 3, explanation: "Frameshift mutations can drastically alter the resulting protein because they change the grouping of codons, affecting all downstream amino acids." },
                    { question: "Barr bodies are associated with:", options: ["Active X chromosomes", "Inactive X chromosomes", "Y chromosomes", "Autosomes"], correctOptionIndex: 1, explanation: "Barr bodies are inactivated X chromosomes found in the somatic cells of female mammals, ensuring dosage compensation for X-linked genes." },
                    { question: "The process of unwinding DNA and separating its strands is called:", options: ["Denaturation", "Renaturation", "Annealing", "Ligation"], correctOptionIndex: 0, explanation: "Denaturation (or melting) occurs when the hydrogen bonds between DNA strands are broken, usually by heat or chemical agents." },
                    { question: "Which end of a DNA strand has a free phosphate group?", options: ["3' end", "5' end", "Both ends", "Neither end"], correctOptionIndex: 1, explanation: "The 5' end of a DNA strand has a free phosphate group attached to the 5' carbon of the deoxyribose sugar." },
                    { question: "Homologous chromosomes:", options: ["Are identical copies of each other.", "Carry different genes.", "Are chromosomes that pair during meiosis.", "Are found only in prokaryotes."], correctOptionIndex: 2, explanation: "Homologous chromosomes have the same genes in the same loci but may have different alleles. They pair up during prophase I of meiosis." },
                    { question: "The sugar found in DNA is:", options: ["Glucose", "Fructose", "Deoxyribose", "Ribose"], correctOptionIndex: 2, explanation: "Deoxyribose is a five-carbon sugar that lacks an oxygen atom on the second carbon, hence 'deoxy'." },
                    { question: "Which protein is responsible for keeping the unwound DNA strands separate during replication?", options: ["DNA ligase", "Topoisomerase", "Single-strand binding proteins", "Helicase"], correctOptionIndex: 2, explanation: "Single-strand binding proteins (SSBPs) bind to the separated single DNA strands to prevent them from re-annealing and to protect them from degradation." },
                    { question: "The region where DNA replication begins is called the:", options: ["Telomere", "Centromere", "Origin of replication", "Replication bubble"], correctOptionIndex: 2, explanation: "Replication starts at specific nucleotide sequences known as origins of replication, where DNA unwinding and synthesis begin." },
                    { question: "Eukaryotic chromosomes are linear, while prokaryotic chromosomes are typically:", options: ["Linear", "Circular", "Branched", "Coiled"], correctOptionIndex: 1, explanation: "Most prokaryotes have a single, circular chromosome located in the nucleoid region of the cytoplasm." },
                    { question: "What is the role of DNA polymerase I in prokaryotic DNA replication?", options: ["Synthesizing the leading strand", "Joining Okazaki fragments", "Removing RNA primers and replacing them with DNA", "Unwinding the DNA helix"], correctOptionIndex: 2, explanation: "DNA polymerase I has 5' to 3' exonuclease activity to remove RNA primers and 5' to 3' polymerase activity to fill the gaps with DNA nucleotides." },
                    { question: "The enzyme that synthesizes DNA from an RNA template is:", options: ["DNA polymerase", "RNA polymerase", "Reverse transcriptase", "DNA ligase"], correctOptionIndex: 2, explanation: "Reverse transcriptase is an enzyme used by retroviruses to generate complementary DNA (cDNA) from an RNA template, a process called reverse transcription." },
                    { question: "Translocation is a type of chromosomal abnormality where:", options: ["A segment of a chromosome is lost.", "A segment of a chromosome is duplicated.", "A segment of a chromosome moves to another chromosome.", "A chromosome is inverted."], correctOptionIndex: 2, explanation: "Translocation involves the rearrangement of parts between non-homologous chromosomes." },
                    { question: "A sequence of three nucleotides on mRNA that codes for a specific amino acid is called a:", options: ["Anticodon", "Codon", "Gene", "Triplet"], correctOptionIndex: 1, explanation: "Codons are the fundamental units of the genetic code, read by ribosomes during translation." },
                    { question: "The process of packing DNA into a compact structure within the nucleus is aided by:", options: ["Ribosomes", "Mitochondria", "Histones", "Cell membrane"], correctOptionIndex: 2, explanation: "Histone proteins form octamers around which DNA wraps, allowing it to be condensed into chromatin and then chromosomes." },
                    { question: "Which of the following is NOT a type of RNA?", options: ["mRNA", "tRNA", "sRNA", "rRNA"], correctOptionIndex: 2, explanation: "mRNA, tRNA, and rRNA are the main types of RNA involved in gene expression. 'sRNA' is not a standard, major category of RNA, although small RNAs exist." },
                    { question: "The central dogma of molecular biology describes the flow of genetic information as:", options: ["Protein \\( \\to \\) RNA \\( \\to \\) DNA", "RNA \\( \\to \\) DNA \\( \\to \\) Protein", "DNA \\( \\to \\) RNA \\( \\to \\) Protein", "DNA \\( \\to \\) Protein \\( \\to \\) RNA"], correctOptionIndex: 2, explanation: "The central dogma states that genetic information flows from DNA to RNA (transcription) and then from RNA to protein (translation)."},
                    { question: "If a somatic cell has 46 chromosomes, how many chromatids would it have during prophase of mitosis?", options: ["23", "46", "92", "Not enough information"], correctOptionIndex: 2, explanation: "Before mitosis begins (in the S phase), DNA replication occurs, so each of the 46 chromosomes will consist of two sister chromatids, resulting in 46 chromosomes and 92 chromatids." },
                    { question: "Which enzyme relieves the supercoiling ahead of the replication fork during DNA replication?", options: ["Helicase", "Primase", "DNA ligase", "Topoisomerase"], correctOptionIndex: 3, explanation: "Topoisomerases prevent the DNA from becoming excessively coiled (supercoiled) ahead of the replication fork by cutting, unwinding, and rejoining DNA strands." },
                    { question: "The removal of introns and splicing of exons occur during:", options: ["DNA replication", "Transcription", "RNA processing", "Translation"], correctOptionIndex: 2, explanation: "RNA processing (or splicing) is a post-transcriptional modification in eukaryotes where non-coding introns are removed from pre-mRNA and coding exons are ligated together." },
                    { question: "What is a nucleoside composed of?", options: ["Sugar and phosphate", "Phosphate and base", "Sugar and base", "Sugar, phosphate, and base"], correctOptionIndex: 2, explanation: "A nucleoside is a subunit of nucleic acids, formed by a nitrogenous base covalently attached to a sugar (ribose or deoxyribose)." },
                    { question: "Cri-du-chat syndrome is caused by a deletion in which chromosome?", options: ["Chromosome 1", "Chromosome 5", "Chromosome 7", "Chromosome 10"], correctOptionIndex: 1, explanation: "Cri-du-chat syndrome is a genetic condition caused by the deletion of genetic material on the short arm of chromosome 5." },
                    { question: "The lagging strand during DNA replication is synthesized:", options: ["Continuously", "Towards the replication fork", "In the 5' to 3' direction in short fragments", "In the 3' to 5' direction continuously"], correctOptionIndex: 2, explanation: "The lagging strand is synthesized discontinuously in short segments called Okazaki fragments, each made in the 5' to 3' direction, but overall moving away from the replication fork." },
                    { question: "Polyploidy refers to the condition where an organism has:", options: ["An extra single chromosome", "Missing a single chromosome", "More than two complete sets of chromosomes", "Chromosomes with deletions"], correctOptionIndex: 2, explanation: "Polyploidy is a chromosomal alteration in which the organism possesses more than two complete chromosome sets." },
                    { question: "A point mutation that results in a codon that codes for a different amino acid is called a:", options: ["Silent mutation", "Nonsense mutation", "Missense mutation", "Frameshift mutation"], correctOptionIndex: 2, explanation: "Missense mutations lead to a change in the protein sequence, potentially affecting protein function." },
                    { question: "Which of the following describes heterochromatin?", options: ["Active in transcription", "Loosely packed", "Contains many genes", "Densely packed and often inactive"], correctOptionIndex: 3, explanation: "Heterochromatin is a tightly packed form of DNA that is largely transcriptionally inactive, often found at centromeres and telomeres." },
                    { question: "The enzyme RNA polymerase is primarily involved in:", options: ["DNA replication", "Translation", "Transcription", "DNA repair"], correctOptionIndex: 2, explanation: "RNA polymerase synthesizes RNA by using a DNA template during the process of transcription." },
                    { question: "The process of forming chromosomes from chromatin during cell division is called:", options: ["Replication", "Condensation", "Decondensation", "Transcription"], correctOptionIndex: 1, explanation: "Chromatin condensation compacts the DNA into visible chromosomes, making it easier to distribute equally to daughter cells." }
                ];
                originalQuizQuestions.push(...mediumMCQs);

                // Tough Questions (40 Qs)
                const toughMCQs = [
                    { question: "Which of the following statements about histones is INCORRECT?", options: ["They are positively charged.", "They are rich in lysine and arginine.", "They are involved in DNA replication initiation.", "They help in DNA packaging."], correctOptionIndex: 2, explanation: "Histones are crucial for DNA packaging but are not directly involved in the initiation of DNA replication; that role belongs to initiator proteins." },
                    { question: "The genetic material of bacteriophages (viruses that infect bacteria) is often:", options: ["Single-stranded DNA", "Double-stranded RNA", "Single-stranded RNA", "Can be DNA or RNA"], correctOptionIndex: 3, explanation: "Bacteriophages, like other viruses, can have either DNA or RNA as their genetic material, and it can be single or double-stranded." },
                    { question: "In eukaryotic cells, DNA replication proceeds bidirectionally from multiple origins of replication, forming:", options: ["Replication forks", "Replication bubbles", "Okazaki fragments", "Chromatids"], correctOptionIndex: 1, explanation: "Replication bubbles are regions where DNA unwinds and replication occurs simultaneously in both directions from an origin of replication." },
                    { question: "A silent mutation is a point mutation that:", options: ["Changes an amino acid to a stop codon.", "Changes an amino acid to a different amino acid.", "Does not change the amino acid sequence.", "Causes a frameshift."], correctOptionIndex: 2, explanation: "Due to the degeneracy of the genetic code, a silent mutation results in a codon that codes for the same amino acid, thus having no effect on the protein sequence." },
                    { question: "Which type of bond links nucleotides in a single strand of DNA?", options: ["Hydrogen bond", "Phosphodiester bond", "Peptide bond", "Ionic bond"], correctOptionIndex: 1, explanation: "Phosphodiester bonds form between the phosphate group of one nucleotide and the sugar of the next, creating the sugar-phosphate backbone." },
                    { question: "If a cell has a defect in DNA ligase, which process would be most affected?", options: ["Transcription", "Translation", "Leading strand synthesis", "Lagging strand synthesis"], correctOptionIndex: 3, explanation: "DNA ligase is essential for joining the Okazaki fragments produced on the lagging strand during DNA replication." },
                    { question: "The phenomenon of crossing over occurs during which phase of meiosis?", options: ["Prophase I", "Metaphase I", "Anaphase I", "Telophase I"], correctOptionIndex: 0, explanation: "Crossing over, the exchange of genetic material between homologous chromosomes, takes place during prophase I of meiosis, contributing to genetic diversity." },
                    { question: "The denaturation temperature of DNA depends on its content of:", options: ["Adenine and Guanine", "Cytosine and Thymine", "Adenine and Thymine", "Guanine and Cytosine"], correctOptionIndex: 3, explanation: "G-C base pairs are held by three hydrogen bonds, while A-T base pairs are held by two. Therefore, DNA with a higher G-C content requires more energy (higher temperature) to denature (separate strands)." },
                    { question: "Which type of RNA brings specific amino acids to the ribosome during protein synthesis?", options: ["mRNA", "rRNA", "tRNA", "snRNA"], correctOptionIndex: 2, explanation: "Transfer RNA (tRNA) molecules have an anticodon that pairs with a specific mRNA codon and carry the corresponding amino acid to the ribosome." },
                    { question: "A deletion mutation on a chromosome involves:", options: ["The addition of extra genetic material.", "The loss of a segment of a chromosome.", "The rearrangement of genetic material within a chromosome.", "The inversion of a chromosome segment."], correctOptionIndex: 1, explanation: "A deletion mutation results in the removal of one or more nucleotides or even large segments of a chromosome, leading to loss of genetic information." },
                    { question: "The nucleosome is the basic unit of:", options: ["Gene expression", "DNA replication", "Chromatin structure", "Protein synthesis"], correctOptionIndex: 2, explanation: "Nucleosomes are the fundamental repeating units of chromatin, consisting of DNA coiled around histone octamers." },
                    { question: "In RNA, Uracil (U) replaces which base found in DNA?", options: ["Adenine", "Guanine", "Cytosine", "Thymine"], correctOptionIndex: 3, explanation: "In RNA, Uracil replaces Thymine, and pairs with Adenine." },
                    { question: "Which enzyme is responsible for synthesizing a short RNA primer to initiate DNA replication?", options: ["DNA ligase", "Helicase", "Primase", "DNA polymerase"], correctOptionIndex: 2, explanation: "Primase synthesizes short RNA sequences (primers) that provide a starting point for DNA polymerase to begin replication." },
                    { question: "What is the primary role of topoisomerase in DNA replication?", options: ["To unwind the DNA helix.", "To add new nucleotides.", "To relieve supercoiling tension.", "To join Okazaki fragments."], correctOptionIndex: 2, explanation: "Topoisomerases manage the topological challenges of DNA replication and transcription by cutting and rejoining DNA strands to prevent over-winding or under-winding." },
                    { question: "The process of DNA repair often involves:", options: ["Replication only", "Transcription only", "Excision of damaged nucleotides and replacement", "Translation only"], correctOptionIndex: 2, explanation: "DNA repair mechanisms typically involve removing the damaged portion of the DNA strand and then synthesizing new DNA to fill the gap using the intact strand as a template." },
                    { question: "Which of the following is a pyrimidine base found in DNA?", options: ["Adenine", "Guanine", "Cytosine", "All of the above"], correctOptionIndex: 2, explanation: "Cytosine and Thymine are pyrimidines (single-ring structures), while Adenine and Guanine are purines (double-ring structures)." },
                    { question: "The total number of hydrogen bonds in a DNA segment with 10 A-T pairs and 5 G-C pairs would be:", options: ["20", "25", "30", "35"], correctOptionIndex: 3, explanation: "Each A-T pair has 2 hydrogen bonds, so 10 A-T pairs = 20 bonds. Each G-C pair has 3 hydrogen bonds, so 5 G-C pairs = 15 bonds. Total = 20 + 15 = 35 hydrogen bonds." },
                    { question: "A nonsense mutation leads to:", options: ["No change in amino acid.", "A change to a different amino acid.", "A premature stop codon.", "A frameshift."], correctOptionIndex: 2, explanation: "A nonsense mutation changes a codon encoding an amino acid into a stop codon, resulting in a truncated and often non-functional protein." },
                    { question: "Which of the following statements about eukaryotic chromosomes is correct?", options: ["They are circular.", "They are found in the cytoplasm.", "They contain multiple origins of replication.", "They lack centromeres."], correctOptionIndex: 2, explanation: "Eukaryotic chromosomes are linear and have multiple origins of replication to facilitate efficient and rapid duplication of large genomes." },
                    { question: "The 'beads-on-a-string' structure visible in chromatin represents:", options: ["DNA polymerase at work", "Replication forks", "Nucleosomes", "Ribosomes on mRNA"], correctOptionIndex: 2, explanation: "The 'beads-on-a-string' appearance refers to the structure of nucleosomes, where DNA is wrapped around histone proteins, making up the fundamental unit of chromatin." },
                    { question: "The role of single-strand binding (SSB) proteins during DNA replication is to:", options: ["Unwind the DNA helix.", "Join DNA fragments.", "Prevent re-annealing of separated strands.", "Synthesize RNA primers."], correctOptionIndex: 2, explanation: "SSB proteins stabilize the separated DNA strands, keeping them accessible for replication enzymes." },
                    { question: "Genetic recombination through crossing over occurs during:", options: ["Mitosis", "Meiosis I", "Meiosis II", "DNA replication"], correctOptionIndex: 1, explanation: "Crossing over, leading to genetic recombination, is a hallmark event of Prophase I of meiosis, where homologous chromosomes exchange segments." },
                    { question: "Which of the following is an example of an aneuploidy condition?", options: ["Polyploidy", "Triploidy", "Monosomy", "Duplication"], correctOptionIndex: 2, explanation: "Aneuploidy is the presence of an abnormal number of chromosomes in a cell, such as having an extra or missing chromosome (e.g., monosomy: 2n-1, trisomy: 2n+1). Polyploidy and triploidy involve entire sets of chromosomes." },
                    { question: "The direction of DNA synthesis on both leading and lagging strands is always:", options: ["3' to 5'", "5' to 3'", "Bidirectional", "Random"], correctOptionIndex: 1, explanation: "DNA polymerases can only synthesize new DNA by adding nucleotides to the 3' end of a growing strand, thus synthesizing in the 5' to 3' direction." },
                    { question: "Which of the following mutations would likely have the most severe impact on a protein's function?", options: ["Silent mutation", "Missense mutation in a non-critical region", "Nonsense mutation early in the coding sequence", "Missense mutation to a similar amino acid"], correctOptionIndex: 2, explanation: "A nonsense mutation early in the sequence would lead to a severely truncated protein, likely rendering it non-functional." },
                    { question: "The packaging of DNA into chromatin involves increasing levels of coiling and folding. The highest level of packaging results in:", options: ["Nucleosomes", "30-nm fiber", "Chromatid", "Double helix"], correctOptionIndex: 2, explanation: "The DNA double helix wraps around histones to form nucleosomes, which then coil into a 30-nm fiber, and further compact to form loops and supercoils, eventually forming the highly condensed structure of a chromatid (half of a replicated chromosome)." },
                    { question: "What is the function of telomerase?", options: ["To unwind DNA during replication.", "To synthesize new telomeres at the ends of chromosomes.", "To repair DNA damage.", "To join DNA fragments."], correctOptionIndex: 1, explanation: "Telomerase is an enzyme that adds repetitive nucleotide sequences to the ends of eukaryotic chromosomes (telomeres), preventing loss of genetic information during replication." },
                    { question: "The genetic material of some viruses (e.g., retroviruses) can be RNA that is reverse transcribed into DNA. This challenges which part of the central dogma?", options: ["DNA to RNA", "RNA to Protein", "Protein to RNA", "All of the above"], correctOptionIndex: 0, explanation: "The process of reverse transcription (RNA to DNA) goes against the typical flow of genetic information from DNA to RNA, which is usually part of the central dogma." },
                    { question: "A person with Klinefelter syndrome has the genotype:", options: ["XO", "XXY", "XYY", "XXX"], correctOptionIndex: 1, explanation: "Klinefelter syndrome is a genetic condition in males resulting from the presence of an extra X chromosome (XXY genotype)." },
                    { question: "The region of a tRNA molecule that pairs with the codon on mRNA is called the:", options: ["Codon", "Anticodon", "Ribosome binding site", "Amino acid attachment site"], correctOptionIndex: 1, explanation: "The anticodon is a three-nucleotide sequence on tRNA that is complementary to a specific mRNA codon, ensuring the correct amino acid is delivered during translation." },
                    { question: "Okazaki fragments are synthesized on which strand of DNA during replication?", options: ["Leading strand", "Lagging strand", "Both strands", "Neither strand"], correctOptionIndex: 1, explanation: "Due to the antiparallel nature of DNA and the 5' to 3' synthesis direction of DNA polymerase, the lagging strand is synthesized discontinuously in short segments called Okazaki fragments." },
                    { question: "Which of the following is a structural difference between DNA and RNA?", options: ["DNA contains ribose sugar, RNA contains deoxyribose sugar.", "DNA is single-stranded, RNA is double-stranded.", "DNA contains thymine, RNA contains uracil.", "DNA contains a phosphate group, RNA does not."], correctOptionIndex: 2, explanation: "The key structural differences include the sugar (deoxyribose in DNA, ribose in RNA) and one of the pyrimidine bases (thymine in DNA, uracil in RNA). DNA is typically double-stranded, while RNA is single-stranded."},
                    { question: "The protein responsible for initiating the unwinding of DNA at the origin of replication in E. coli is:", options: ["DNA polymerase III", "DnaA protein", "SSB protein", "DNA ligase"], correctOptionIndex: 1, explanation: "In E. coli, the DnaA protein binds to the origin of replication and initiates the unwinding of the DNA double helix." },
                    { question: "If a DNA sequence is 5'-ATTCCG-3', what will be the corresponding mRNA sequence?", options: ["5'-AUUCCG-3'", "3'-UAAGGC-5'", "5'-TAAGGC-3'", "3'-ATTCCG-5'"], correctOptionIndex: 0, explanation: "During transcription, DNA's Adenine (A) pairs with Uracil (U) in RNA, Thymine (T) pairs with Adenine (A), and Guanine (G) pairs with Cytosine (C). The mRNA sequence is synthesized in a 5' to 3' direction, complementary to the 3' to 5' DNA template strand. Assuming the given sequence is the template strand's sense strand for simplicity, the mRNA would be 5'-AUUCCG-3'. If it were the antisense strand, we'd need the template for transcription, but the question implies a direct conversion. Given the options, 5'-AUUCCG-3' is the direct conversion where T becomes U." },
                    { question: "A missense mutation results in:", options: ["A shorter protein due to premature stop codon.", "No change in the amino acid sequence.", "A change of one amino acid to another.", "A complete loss of protein function."], correctOptionIndex: 2, explanation: "A missense mutation is a point mutation where a single nucleotide change results in a codon that codes for a different amino acid." },
                    { question: "The phenomenon of gene amplification leads to:", options: ["Increased protein synthesis.", "Decreased protein synthesis.", "No change in protein synthesis.", "Frameshift mutations."], correctOptionIndex: 0, explanation: "Gene amplification is the increase in the number of copies of a gene, which can lead to increased production of the protein encoded by that gene." },
                    { question: "Which of the following is a common feature of both prokaryotic and eukaryotic DNA replication?", options: ["Multiple origins of replication", "Linear chromosomes", "DNA ligase activity", "Telomere replication"], correctOptionIndex: 2, explanation: "Both prokaryotic and eukaryotic DNA replication require DNA ligase to seal nicks in the sugar-phosphate backbone, particularly for joining Okazaki fragments. Multiple origins and linear chromosomes are characteristic of eukaryotes, and telomeres are specific to eukaryotes." },
                    { question: "The enzyme RNA polymerase forms phosphodiester bonds between:", options: ["Amino acids", "Sugars and bases", "Nucleotides", "DNA and RNA"], correctOptionIndex: 2, explanation: "RNA polymerase links ribonucleotides together to form an RNA strand during transcription by forming phosphodiester bonds." },
                    { question: "The genetic disorder Huntington's disease is caused by an expansion of a trinucleotide repeat sequence. This is an example of a:", options: ["Point mutation", "Deletion mutation", "Repeat expansion mutation", "Translocation"], correctOptionIndex: 2, explanation: "Huntington's disease is caused by an abnormally long repeat of a CAG sequence within the Huntington gene, leading to the production of an altered protein." },
                    { question: "The process of DNA fingerprinting relies on variations in:", options: ["Gene sequences coding for proteins.", "The number of repeated DNA sequences.", "The arrangement of chromosomes.", "The type of nitrogenous bases present."], correctOptionIndex: 1, explanation: "DNA fingerprinting (or profiling) utilizes variations in the number of tandem repeats (STRs or VNTRs) at specific loci in the genome, which are highly polymorphic among individuals." }
                ];
                originalQuizQuestions.push(...toughMCQs);


                // This code ensures we have 100 questions. If I generated less, it adds placeholders.
                // In a real scenario, these would be carefully crafted.
                while (originalQuizQuestions.length < 100) {
                    originalQuizQuestions.push({
                        question: "Placeholder Question: This is a placeholder question.",
                        options: ["Option A", "Option B", "Option C", "Option D"],
                        correctOptionIndex: 0,
                        explanation: "This is a placeholder explanation for a question that needs to be added."
                    });
                }

                // Randomly select one special question from the entire set on initial load
                specialQuestionOriginalIndex = Math.floor(Math.random() * originalQuizQuestions.length);
            }

            // Create a fresh copy of questions for the current quiz attempt
            quizQuestions = JSON.parse(JSON.stringify(originalQuizQuestions));

            // Mark the special question in the current quizQuestions array
            quizQuestions[specialQuestionOriginalIndex].special = true;

            // Handle "Surprise Me" mode: Randomize 30% of MCQ order if checked
            const surpriseMe = document.getElementById('surpriseMeCheckbox').checked;
            if (surpriseMe) {
                // Determine how many questions to randomize (30%)
                const numToRandomize = Math.floor(quizQuestions.length * 0.30);

                // Get a subset of indices to shuffle
                const indices = Array.from({ length: quizQuestions.length }, (_, i) => i);
                shuffleArray(indices);
                const shuffledSubsetIndices = indices.slice(0, numToRandomize);

                // Create a temporary array of the questions to be randomized
                const questionsToShuffle = shuffledSubsetIndices.map(idx => quizQuestions[idx]);
                shuffleArray(questionsToShuffle);

                // Place the shuffled questions back into their new positions
                for (let i = 0; i < numToRandomize; i++) {
                    quizQuestions[shuffledSubsetIndices[i]] = questionsToShuffle[i];
                }
            } else {
                // If not "Surprise Me" mode, just shuffle all questions
                shuffleArray(quizQuestions);
            }
        }

        // Load MathJax for rendering LaTeX
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
        script.async = true;
        document.head.appendChild(script);

        // --- Event Listeners ---

        document.getElementById('loginBtn').addEventListener('click', () => {
            const id = document.getElementById('loginId').value;
            const password = document.getElementById('loginPassword').value;
            const loginError = document.getElementById('loginError');

            if (id === LOGIN_ID && password === LOGIN_PASSWORD) {
                loginError.classList.add('hidden');
                showPage('candidateNamePage');
            } else {
                loginError.classList.remove('hidden');
            }
        });

        document.getElementById('startQuizBtn').addEventListener('click', () => {
            const candidateNameInput = document.getElementById('candidateName');
            const candidateName = candidateNameInput.value.trim();
            const nameError = document.getElementById('nameError');

            if (candidateName) {
                nameError.classList.add('hidden');
                userAnswers = new Array(quizQuestions.length).fill(null);
                currentQuestionIndex = 0;
                startTimer();
                renderQuestion();
                showPage('quizPage');
            } else {
                nameError.classList.remove('hidden');
            }
        });

        document.getElementById('nextBtn').addEventListener('click', nextQuestion);
        document.getElementById('prevBtn').addEventListener('click', prevQuestion);
        document.getElementById('submitQuizBtn').addEventListener('click', () => submitQuiz(false));
        document.getElementById('restartQuizBtn').addEventListener('click', () => {
            // Reset quiz state
            currentQuestionIndex = 0;
            userAnswers = [];
            clearInterval(timerInterval); // Clear any lingering timer
            initializeQuiz(); // Re-initialize and potentially re-shuffle questions for a new attempt
            // Clear login fields and go back to login page
            document.getElementById('loginId').value = '';
            document.getElementById('loginPassword').value = '';
            document.getElementById('candidateName').value = '';
            document.getElementById('surpriseMeCheckbox').checked = false; // Reset checkbox
            showPage('loginPage');
        });

        // Initialize quiz structure and set initial UI elements on load
        setLiveDate();
        initializeQuiz();
        // Explicitly show the login page after initialization to prevent any display issues
        showPage('loginPage');
    </script>
</body>
</html>
